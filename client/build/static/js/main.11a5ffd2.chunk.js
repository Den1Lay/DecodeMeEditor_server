(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{157:function(e){e.exports=JSON.parse('{"userData":{"nickname":"Es_ILias","password":"17171717","secret":"17"},"projectsCoordData":[{"0":{"path":"001010","height":"question"},"1":{"path":"01010101011111100123400110","height":15},"2":{"path":"0","height":0},"lastVersion":"1","projectsId":"uuid11"}],"lastProject":"uuid11","projects":[{"name":"string","description":"string","access":["Es_ILias"],"great_access":["Es_ILias"],"projectId":"uuid11","metaDataForm":{"healt":5,"enny":{"emotions":5,"instinc":5,"intellect":5}},"versies":{"0":{"dateCreation":"string","pos":"0","branch":{"0":{"newMetaData":{"healt":6,"enny":{"emotions":7,"instinc":4,"intellect":5}},"ans":"Why not? Go","pos":"00","branch":{"base":[{"coord":{"path":"00","height":"0"},"main":"","commets":"","picture":{"src":"null","alt":""}},{"coord":{"path":"00","height":"1"},"main":"","commets":"","picture":{"src":"null","alt":""}}]}},"1":{"pos":"01","branch":{"0":{"newMetaData":{"healt":0,"enny":{"emotions":0,"instinc":0,"intellect":0}},"ans":"Why not? Go","pos":"010","branch":{"base":[],"choseCount":0}},"1":{"newMetaData":{"healt":0,"enny":{"emotions":0,"instinc":0,"intellect":0}},"ans":"Why not? Go","pos":"011","branch":{"base":[],"choseCount":0}},"base":[{"coord":{"path":"01","height":"0"},"main":"","commets":"","picture":{"src":"null","alt":""}}],"question":{"ref":{"coord":{"path":"00","height":"1"}},"main":"Hey, will you go with us to camp?","commets":"Poka hz","picture":{"src":"main_street / null","alt":"A long narrow street with trees that create two impassable walls."}},"choseCount":2}},"branchDirection":"","base":[{"coord":{"path":"0","height":"0"},"main":"Yesterday i heard that Jeem get up some money. And i heard that there will auction, where uncle Bob will sell his track.","commets":"Wake up main theme","picture":{"src":"main_street / null","alt":"A long narrow street with trees that create two impassable walls."}},{"coord":{"path":"0","height":"1"},"main":"I saw that bit of shit. Bob will get 100 $ maximum","commets":"Wake up main theme","picture":{"src":"main_street / null","alt":"A long narrow street with trees that create two impassable walls."}}],"question":{"ref":false,"main":"Hey, will you go with us to camp?","commets":"Poka hz","picture":{"src":"main_street / null","alt":"A long narrow street with trees that create two impassable walls."}},"choseCount":2}}}}]}')},176:function(e,a,t){e.exports=t(333)},255:function(e,a){},258:function(e,a,t){},270:function(e,a,t){},279:function(e,a,t){},280:function(e,a,t){},290:function(e,a,t){},291:function(e,a,t){},294:function(e,a,t){},297:function(e,a,t){},302:function(e,a,t){},303:function(e,a,t){},318:function(e,a,t){},319:function(e,a,t){},320:function(e,a,t){},321:function(e,a,t){},322:function(e,a,t){},323:function(e,a,t){},325:function(e,a,t){},326:function(e,a,t){},327:function(e,a,t){},328:function(e,a,t){},329:function(e,a,t){},330:function(e,a,t){},331:function(e,a,t){},332:function(e,a,t){},333:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),o=t(15),s=t.n(o),c=t(14);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=t(45),l=t(149),u=t(46),d=t(4),p=t(71),m=t(336),h=t(345),v=t(109),f=t.n(v),E=t(338),b=function(e){var a=e.type,t=e.message,r=e.description;E.a[a]({message:t,description:r})};var k=function(e,a,t,r){for(var n in e){(function(a){t=Array.isArray(t)?t:[t];for(var r=e[a],n=t.slice();n.length;)r=r[n.shift()];return r})(n)===a&&(r[0]=n)}},_=t(111),j=t.n(_),w=t(154),g=t(84),D=t(155),P=function(){this.addEventListener("message",(function(e){e&&new(function(){function e(a){Object(g.a)(this,e),console.log("INSIDE:",a),this.superData=a,this.boost=0,this.maxPath="",this.grid=[]}return Object(D.a)(e,[{key:"promiseLessSeries",value:function(e){for(var a=0;a<e.length;)e[a](),a++}},{key:"checker",value:function(){var e=Object(w.a)(j.a.mark((function e(a,t){var r,n,o,s,c,i,l,u=this,d=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>2&&void 0!==d[2]?d[2]:this.superData,n=r.branch,o=this,s=n.choseCount,c=[],i=0,a&&this.findAndSet({path:r.pos,height:n.boost,data:r}),0!==s){for(;i<s;)c.push(n["q"+i]),i++;l=c.map((function(e,r){return function(){this.checker(a,t,e)}.bind(o)})),this.promiseLessSeries(l),t&&(r.pos.split("").every((function(e){return"0"===e}))?n.boost=0:n.boost=n["q"+~~((s%2===0?s-1:s)/2)].branch.boost)}else t&&(n.boost=u.boost,u.boost++,u.maxPath.length<r.pos.length&&(u.maxPath=r.pos));case 9:case"end":return e.stop()}}),e,this)})));return function(a,t){return e.apply(this,arguments)}}()},{key:"updater",value:function(){var e=this;this.checker(!1,!0).then((function(){e.grid=Array(e.boost).fill("").map((function(){return[]})).map((function(){return Array(e.maxPath.length).fill("").map((function(){return{data:null}}))})),e.checker(!0,!1).then((function(){e.grid=e.grid.reverse(),postMessage({grid:e.grid})}))}))}},{key:"findAndSet",value:function(e){var a=e.path,t=e.height,r=e.data;this.grid[+t][a.length-1].data=r}}]),e}())(e.data).updater()}))},O=function e(a){Object(g.a)(this,e);var t=a.toString(),r=new Blob(["("+t+")()"]),n=URL.createObjectURL(r);return new Worker(n)},C=function(e){return e[0].toUpperCase()+e.substring(1)},N=(Object(m.a)(new Date,"yyyy-MM-dd"),{projectsCoordsData:[],projects:!1,workPerson:null,workPCD:null,workBranch:null,mapStore:[],mapGrid:[],mapCurrent:"",availablePayload:null,users:[],personObj:null,friends:[],mainPlace:"editor"}),I=Object(m.a)(new Date,"yyyy-MM-dd"),S={nickname:"Es_ILias",avatar:"",lastProject:"none"},y=Object(i.c)({main:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,a=arguments.length>1?arguments[1]:void 0,t=a.type,r=a.payload,n=a.random;function o(){e.workBranch={},e.workPCD=null,e.workBranch.branch={},e.mainPlace="error",e.workBranch.v=n}function s(a){var t,r;"question"===e.workPCD[e.workPCD.workVersion].height?e.workBranch.branch.question?a():o():null!==(t=null===(r=e.workBranch.branch.base)||void 0===r?void 0:r[e.workPCD[e.workPCD.workVersion].height])&&void 0!==t&&t?a():o()}switch("CHANGE_BRANCH"!==t&&(e.mapStore=[],e.mapGrid=[],e.mapCurrent=[]),Array.isArray(window.reduxHistory)||(window.reduxHistory=[]),window.reduxHistory.push({type:t,payload:r}),t){case"ADD_PROJECT":return function(){var a=Object(h.a)(),t="v"+Object(h.a)(),o="p"+Object(h.a)(),s=r.name,c=r.description,i=r.access,l=r.superAccess;e.projects.unshift({name:s,description:c,superId:o,access:i,superAccess:l,versions:[{comment:"Init",date:I,superId:t,master:null,illustrations:[],ways:[{wayId:a,color:"green",wayDirection:""}],data:{pos:"0",wayId:a,branch:{branchDirection:"",base:[{coord:{path:"0",height:"0"},label:"",main:"",comment:"",picture:{src:null,alt:""}}],question:!1,choseCount:0}}}]});var u=e.projects[0].versions[0].superId;return e.workPCD=Object(p.a)({projectId:e.projects[0].superId,workVersion:u},u,{path:"0",height:"0"}),e.projectsCoordsData=[e.workPCD].concat(e.projectsCoordsData),e.workBranch=e.projects[0].versions[0].data,e.personObj.userData.myLastProject=e.projects[0].superId,e.mainPlace="editor",e.workBranch.v="n"+n,Object(d.a)({},e)}();case"SETUP_PROJECT":return function(){console.log(r);var a,t=r.name,o=r.description,s=r.access,c=r.superAccess;for(var i in e.projects)e.projects[i].superId===e.workPCD.projectId&&(a=i);function l(e,a,t){e.forEach((function(e){a.includes(e)||t.push(e)}))}var u=[],p=[],m=[],h=[];return l(e.projects[a].access,s,u),l(e.projects[a].superAccess,c,p),l(s,e.projects[a].access,m),l(c,e.projects[a].superAccess,h),e.projects[a]=Object(d.a)(Object(d.a)({},e.projects[a]),{},{name:t,description:o,access:s,superAccess:c}),e.workBranch.v="s"+n,e.mainPlace="editor",Object(d.a)(Object(d.a)({},e),{},{kicked:u,superKicked:p,newObservers:m,newEditord:h})}();case"LOGOUT":return delete localStorage.token,{projectsCoordsData:[],projects:!1,workPerson:null,workPCD:null,workBranch:null,mapStore:[],mapGrid:[],mapCurrent:"",availablePayload:null,users:[],personObj:null,friends:[],mainPlace:"editor"};case"OPEN_PLACE":return Object(d.a)(Object(d.a)({},e),{},{mainPlace:r});case"CLEAN_APPLICANT_LIST":return e.personObj.userData.applicantList=e.personObj.userData.applicantList.filter((function(e){return e.superId!==r})),console.log(e.personObj.userData.applicantList),e;case"UPDATE_APPLICANT_LIST":return e.personObj.userData.applicantList.push(r),Object(d.a)({},e);case"UPDATE_DATA":return function(){var a=r.data,t=r.address,i=(r.dls,e.workPerson===a.person);switch(t){case"friend":!function(){var t=a.userData,r=a.projects,o=[];k(e.friends,t.superId,["userData","superId"],o),e.friends[o[0]].projects=r,e.friendV=n}();break;case"projects":break;case"new_version":i&&function(){var t=a.projectId,r=a.workVersion,o=[];k(e.projects,t,"superId",o),e.projects[o[0]].versions.push(r),e.workBranch.v=n}();break;case"versions":i&&function(){a.person;var t=a.projectId,r=a.versionId,i=a.workVersion,l=[];k(e.projects,t,"superId",l);var u=[];k(e.projects[l[0]].versions,r,"superId",u),e.projects[l[0]].versions[u[0]].data=i;var d=[];k(e.projects,e.workPCD.projectId,"superId",d);var p=[];k(e.projects[d[0]].versions,e.workPCD.workVersion,"superId",p),e.workBranch=e.projects[d[0]].versions[p[0]].data;var m=e.workPCD[e.workPCD.workVersion].path.substring(1);e.workBranch.v=n,c(m,e);var h=[];k(e.projectsCoordsData,e.workPCD.projectId,"proojectId",h),"None"!==e.workBranch?(localStorage.updateWithDeleteWorkDirFlag="false",s((function(){localStorage.updateWithDeleteWorkDirFlag="true"})),"true"!==localStorage.updateWithDeleteWorkDirFlag&&(e.projectsCoordsData.splice(h[0],1),e.lastProject=null,e.workBranch.v="c"+n)):(o(),e.projectsCoordsData.splice(h[0],1),e.lastProject=null,e.workBranch.v="c"+n)}();break;case"available":i&&function(){a.person;var t=a.workPCD,r=a.pass,n=[];k(e.projects,t.projectId,"superId",n);var o=[];k(e.projects[n[0]].versions,t.workVersion,"superId",o),e.projects[n[0]].versions[o[0]].master!==e.personObj.userData.nickName&&(e.projects[n[0]].versions[o[0]].master=r)}();break;case"illustrations":i&&function(){var t=a.newIllust,r=a.action,n=a.workPCD,o=[];k(e.projects,n.projectId,"superId",o);var s=[];switch(k(e.projects[o[0]].versions,n.workVersion,"superId",s),r){case"ADD":e.projects[o[0]].versions[s[0]].illustrations.push(t);break;case"REMOVE":e.projects[o[0]].versions[s[0]].illustrations=e.projects[o[0]].versions[s[0]].illustrations.filter((function(e){return e.src!==t.src}))}console.log("%c%s","color: pink; font-size: 24px;","UPDATED_ILLUS:",e.projects[o[0]].versions[s[0]].illustrations)}();break;case"delete":i&&function(){var t=a.workPCD,r=a.target,o=[];k(e.projects,t.projectId,"superId",o);var s=[];if(k(e.projectsCoordsData,t.projectId,"projectId",s),"project"===r)e.projects.splice(o[0],1),e.projectsCoordsData.splice(s[0],1);else{var c=[];k(e.projects[o[0]].versions,t.workVersion,"superId",c),e.projects[o[0]].versions.splice(c[0],1),e.projectsCoordsData.splice(s[0],1)}e.workPCD.projectId===t.projectId&&(e.workBranch={},e.workBranch.branch={},e.workPCD=null,e.mainPlace="error"),e.workBranch.v=n}()}return e}();case"ACCESS_CONTROL":return function(){var a=r.event,t=r.pass,o=t.projectId,s=t.superId,c=t.all;if(e.personObj.userData.superId===s)return e;var i=[];k(e.friends,s,["userData","superId"],i);var l=[];k(e.friends[i[0]].projects,o,"superId",l);var u=e.personObj.userData.superId,d=e.friends[i[0]].projects[l[0]].access.slice(),p=e.friends[i[0]].projects[l[0]].superAccess.slice();switch(a){case"NEW":d.includes(u)||d.includes("all")||b({type:"success",message:"New access",description:"From ".concat(r.pass.nickName)}),e.friends[i[0]].projects[l[0]].access.push(c?"all":u);break;case"NEW_SUPER":p.includes(u)||p.includes("all")||b({type:"success",message:"New super access",description:"From ".concat(r.pass.nickName)}),e.friends[i[0]].projects[l[0]].superAccess.push(c?"all":u);break;case"KICK":e.friends[i[0]].projects[l[0]].access=c?d.filter((function(e){return"all"!==e})):d.filter((function(e){return e!==u}));var m=e.friends[i[0]].projects[l[0]].access;m.includes(u)||m.includes("all")||b({type:"warning",message:"Lose access",description:"From ".concat(r.pass.nickName)}),e.workPerson;break;case"SUPER_KICK":e.friends[i[0]].projects[l[0]].superAccess=c?p.filter((function(e){return"all"!==e})):p.filter((function(e){return e!==u}));var h=e.friends[i[0]].projects[l[0]].access;h.includes(u)||h.includes("all")||b({type:"warning",message:"Lose super access",description:"From ".concat(r.pass.nickName)}),e.workPerson}return e.accessV=n,e}();case"NEW_FRIEND_PROJECT":return function(){var a=r.personId,t=r.project,o=[];return k(e.friends,a,["userData","superId"],o),e.friends[o[0]].projects.push(t),e.friendV=n,e.workBranch.v=n,e}();case"CHANGE_MASTER":return e.workPCD?function(){var a=[];k(e.projects,e.workPCD.projectId,"superId",a);var t=[];if(k(e.projects[a[0]].versions,e.workPCD.workVersion,"superId",t),r){var o=e.personObj.userData.nickName;e.projects[a[0]].versions[t[0]].master=o,e.availablePayload=o,e.workBranch.v="a"+n}else e.projects[a[0]].versions[t[0]].master===e.personObj.userData.nickName&&(e.projects[a[0]].versions[t[0]].master=null,e.availablePayload=null,e.workBranch.v="a"+n);return e}():e;case"SET_ILLUSTRATIONS":return function(){var a=r.newIllustration,t=r.action,o=(r.sender,r.projectId,[]);k(e.projects,e.workPCD.projectId,"superId",o);var s=[];switch(k(e.projects[o[0]].versions,e.workPCD.workVersion,"superId",s),t){case"ADD":e.projects[o[0]].versions[s[0]].illustrations.push(a);break;case"REMOVE":e.projects[o[0]].versions[s[0]].illustrations=e.projects[o[0]].versions[s[0]].illustrations.filter((function(e){return e.src!==a.src}))}return e.workBranch.v="i"+n,e}();case"SET_MAP_DATA":return function(){var a=r.mapGrid,t=r.mapStore,n=r.mapCurrent;return Object(d.a)(Object(d.a)({},e),{},{mapGrid:a,mapStore:t,mapCurrent:n})}();case"ADD_VERSION":return function(){var a=[];k(e.projects,e.workPCD.projectId,"superId",a);var t=[];k(e.projects[a[0]].versions,e.workPCD.workVersion,"superId",t);var o=e.projects[a[0]].versions[t[0]].data,s=new(f.a.factory(o))(o),i=e.projects[a[0]].versions[t[0]].illustrations,l="v"+Object(h.a)();e.projects[a[0]].versions.push({comment:r.comment,date:I,superId:l,master:null,illustrations:i,data:s});var u=[];k(e.projectsCoordsData,e.workPCD.projectId,"projectId",u);var d=f.a.factory(e.workPCD[e.workPCD.workVersion]);return e.projectsCoordsData[u[0]][l]=new d(e.workPCD[e.workPCD.workVersion]),e.projectsCoordsData[u[0]].workVersion=l,e.workPCD=e.projectsCoordsData[u[0]],e.workBranch=e.projects[a[0]].versions[e.projects[a[0]].versions.length-1].data,c(e.workPCD[e.workPCD.workVersion].path.substring(1),e),e.workBranch.v="v"+n,e.mainPlace="editor",e}();case"NEW_FRIEND_VERSION":return e;case"SAVE_POD":return function(){console.log("PAYLOD:",r);var a=r.data,t=a.label,o=a.mainPart,s=a.comment,c=a.artsDesription,i=a.branchDirection,l=(a.wayDirection,a.answers),p=a.artSrc,m=r.selectedType,h=e.workBranch.branch,v=e.workPCD[e.workPCD.workVersion].height,f=function(){l.forEach((function(a){var t=a.content,r=a.key,n=a.ref;console.log(typeof r);var o=!h.hasOwnProperty("q"+r);h["q"+r]=o?{ans:t,pos:e.workBranch.pos+r,branch:{branchDirection:"",base:[{coord:{path:e.workBranch.pos+r,height:"0"},label:"",main:"",comment:"",picture:{src:null,alt:""}}],question:!1,choseCount:0,ref:0!==n.length&&n}}:Object(d.a)(Object(d.a)({},h["q"+r]),{},{ans:t})})),h.choseCount=l.length,h.question={coord:{path:e.workBranch.pos,height:"question"},label:t,main:o,comment:s,picture:{src:p,alt:c}}};if("0"===m&&"question"!==v)h.base[v]={coord:{path:e.workBranch.pos,height:v},label:t,main:o,comment:s,picture:{src:p,alt:c}};else if("1"===m&&"question"===v)f();else if("1"===m&&"question"!==v){if(f(),v<h.base.length-1){var E=h.base.splice(v+1);h.q0.branch.base=E.map((function(e,a){return Object(d.a)(Object(d.a)({},e),{},{coord:{path:e.coord.path+"0",height:a}})}))}h.base.splice(v,1),e.workPCD[e.workPCD.workVersion].height="question"}else if("0"===m&&"question"===v){var b=e.workBranch.branch;b.base=[].concat(Object(u.a)(b.base),[{coord:{path:e.workBranch.pos,height:b.base.length},label:t,main:o,comment:s,picture:{src:p,alt:c}}]),e.workPCD[e.workPCD.workVersion].height=b.base.length-1;for(var k=0;k<b.choseCount;k++)delete b["q"+k];b.choseCount=0,b.question=!1}return e.workBranch.branch.branchDirection=i,e.workBranch.v="p"+n,Object(d.a)({},e)}();case"CHANGE_BRANCH":return function(){var a=[];k(e.projects,e.workPCD.projectId,"superId",a);var t=[];if(k(e.projects[a[0]].versions,e.workPCD.workVersion,"superId",t),"back"===r){var o=e.workPCD[e.workPCD.workVersion].path;e.workPCD[e.workPCD.workVersion].path=o.substring(0,o.length-1),e.workPCD[e.workPCD.workVersion].height="question",e.workBranch=e.projects[a[0]].versions[t[0]].data,c(e.workPCD[e.workPCD.workVersion].path.substring(1),e),e.workBranch.branch.base.length&&(e.workPCD[e.workPCD.workVersion].height="0")}else if("string"===typeof r){e.workBranch=e.projects[a[0]].versions[t[0]].data,e.workPCD[e.workPCD.workVersion].path=r,e.workPCD[e.workPCD.workVersion].height="question",c(r.substring(1),e),e.workBranch.branch.base.length&&(e.workPCD[e.workPCD.workVersion].height="0")}else e.workBranch=e.workBranch.branch["q"+r],e.workPCD[e.workPCD.workVersion].path=e.workPCD[e.workPCD.workVersion].path+r,e.workPCD[e.workPCD.workVersion].height="question",e.workBranch.branch.base.length&&(e.workPCD[e.workPCD.workVersion].height="0");return e.workBranch.v="c"+n,Object(d.a)({},e)}();case"ADD_POD":return function(){console.log(r);var a=e.workBranch.branch;if("question"!==r){var t=a.base.slice(0,+r+1),o=a.base.slice(+r+1);a.base=[].concat(Object(u.a)(t),[{coord:{path:e.workBranch.pos,height:+r+1},label:"",main:"",comment:"",picture:{src:null,alt:""}}]).concat(o.map((function(e){var a=e.coord,t=a.path,r=a.height;return Object(d.a)(Object(d.a)({},e),{},{coord:{path:t,height:+r+1}})}))),e.workPCD[e.workPCD.workVersion].height=+r+1}else a.base=[].concat(Object(u.a)(a.base),[{coord:{path:e.workBranch.pos,height:a.base.length},label:"",main:"",comment:"",picture:{src:null,alt:""}}]),e.workPCD[e.workPCD.workVersion].height=a.base.length-1;return e.workBranch.v="p"+n,Object(d.a)({},e)}();case"CHOOSE_POD":return e.workPCD[e.workPCD.workVersion].height=r,e.mainPlace="editor",e.workBranch.v="c"+n,Object(d.a)({},e);case"DELETE_POD":return function(){console.log(r);var a,t=e.workBranch.branch;if("question"===r){for(var o=0;o<t.choseCount;o++)delete t["q"+o];t.choseCount=0,t.question=!1,a=t.base.length-1}else t.base.splice(r,1),t.base=t.base.map((function(e,a){return Object(d.a)(Object(d.a)({},e),{},{coord:Object(d.a)(Object(d.a)({},e.coord),{},{height:a})})})),a=t.base.length-1>=r?r:r-1;return e.workPCD[e.workPCD.workVersion].height=a,e.workBranch.v="p"+n,Object(d.a)({},e)}();case"SELECT_PROJECT":return console.log(r),function(){var a=e.personObj.userData.friends.some((function(a){return a.superId===e.workPerson}));if(e.personObj.userData.superId!==e.workPerson){if(a){var t;for(var o in e.personObj.userData.friends)e.personObj.userData.friends[o].superId===e.workPerson&&(t=o);e.personObj.userData.friends[t].lastProject=r}}else e.personObj.userData.myLastProject=r;var i=[];k(e.projectsCoordsData,r,"projectId",i);var l=[];function u(){var a=e.projects[l[0]].versions[0].superId,t=e.projects[l[0]].versions[0].data.branch.base.length?"0":"question";e.projectsCoordsData.push(Object(p.a)({projectId:r,workVersion:a},a,{path:"0",height:t})),i=[e.projectsCoordsData.length-1]}k(e.projects,r,"superId",l),i.length||u(),e.workPCD=e.projectsCoordsData[i[0]];var m=[];if(k(e.projects[l[0]].versions,e.workPCD.workVersion,"superId",m),!m.length){var h=[];k(e.projectsCoordsData,r,"projectId",h),e.projectsCoordsData.splice(h[0],1),u(),m=["0"],e.workPCD=e.projectsCoordsData[i[0]]}return e.workBranch=e.projects[l[0]].versions[m[0]].data,c(e.workPCD[e.workPCD.workVersion].path.substring(1),e),"None"!==e.workBranch?(localStorage.chooseProjectFlag="false",s((function(){localStorage.chooseProjectFlag="true"})),"true"!==localStorage.chooseProjectFlag&&(e.projectsCoordsData.splice(i[0],1),u(),e.workPCD=e.projectsCoordsData[i[0]])):(e.projectsCoordsData.splice(i[0],1),u(),e.workPCD=e.projectsCoordsData[i[0]]),e.workBranch=e.projects[l[0]].versions[m[0]].data,e.workBranch.v="c"+n,e.mainPlace="editor",Object(d.a)({},e)}();case"SELECT_VERSION":return function(){var a=[];k(e.projects,e.workPCD.projectId,"superId",a);var t=[];if(k(e.projects[a[0]].versions,r,"superId",t),!e.workPCD.hasOwnProperty(r)){var o=e.projects[a[0]].versions[t[0]].data.branch.base.length?"0":"question";e.workPCD[r]={path:"0",height:o}}return e.workPCD.workVersion=r,e.workBranch=e.projects[a[0]].versions[t[0]].data,e.workBranch.v="c"+n,e}();case"ADD_FRIEND":return console.log(r),function(){var a=r.userData;return e.personObj.userData.friends.push({superId:a.superId,lastProject:null}),e.friends.push(r),e}();case"CHOOSE_ME":return function(){if(e.workBranch={},e.projects=r,e.workPerson=e.personObj.userData.superId,null!==e.personObj.userData.myLastProject){var a=e.personObj.userData.myLastProject,t=[];if(k(e.projectsCoordsData,a,"projectId",t),t.length){e.workPCD=e.projectsCoordsData[t[0]];var i=[];if(k(e.projects,e.workPCD.projectId,"superId",i),i.length){var l=[];if(k(e.projects[i[0]].versions,e.workPCD.workVersion,"superId",l),l.length)e.workBranch=e.projects[i[0]].versions[l[0]].data,c(e.workPCD[e.workPCD.workVersion].path.substring(1),e),"None"!==e.workBranch?s((function(){return e.mainPlace="editor"})):o();else o()}else o()}else o()}else e.workPCD=null,e.workBranch.branch={},e.mainPlace="beginner";return e.workBranch.v="c"+n,e}();case"CHOOSE_PERSON":return function(){var a=[];k(e.friends,r,["userData","superId"],a),e.projects=e.friends[a[0]].projects;var t=[];k(e.personObj.userData.friends,r,"superId",t);var i=e.personObj.userData.friends[t[0]].lastProject;if(null!==i){var l=[];if(k(e.projectsCoordsData,i,"projectId",l),l.length){e.workPCD=e.projectsCoordsData[l[0]];var u=[];if(k(e.projects,e.workPCD.projectId,"superId",u),u.length){console.time();var p=[];if(k(e.projects[u[0]].versions,e.workPCD.workVersion,"superId",p),p.length)console.timeEnd(),e.workBranch=e.projects[u[0]].versions[p[0]].data,c(e.workPCD[e.workPCD.workVersion].path.substring(1),e),"None"!==e.workBranch?s((function(){return e.mainPlace="editor"})):o();else o()}else o()}else o()}else e.workPCD=null,e.workBranch.branch={},e.mainPlace="choose";return e.workPerson=r,e.workBranch.v="c"+n,Object(d.a)({},e)}();case"INIT":return function(){console.log("%c%s","color: pink; font-size: 22px","DEBUG:",r);var a=r.friends,t=r.personObj,n=t.projects,i=t.projectsCoordsData,l=t.lastProject,u=t.lastPerson,p=t.userData.superId;e.personObj=r.personObj,e.projectsCoordsData=e.personObj.projectsCoordsData,e.friends=a,e.workBranch={};var m=[];if(k(i,l,"projectId",m),u===p)if(e.workPerson=p,e.projects=e.personObj.projects,m.length){e.workPCD=e.projectsCoordsData[m[0]];var h=[];if(k(n,l,"superId",h),h.length){var v=[];if(k(e.projects[h[0]].versions,e.workPCD.workVersion,"superId",v),v.length)e.workBranch=e.projects[h[0]].versions[v[0]].data,c(e.workPCD[e.workPCD.workVersion].path.substring(1),e),"None"!==e.workBranch?s((function(){return e.mainPlace="editor"})):o();else o()}else o()}else o();else{e.workPerson=u;var f=[];if(k(a,u,["userData","superId"],f),e.projects=e.friends[f[0]].projects,m.length)if(e.workPCD=e.projectsCoordsData[m[0]],null!==l){var E=[];if(k(e.projects,l,"superId",E),E.length){var b=[];if(k(e.projects[E[0]].versions,e.workPCD.workVersion,"superId",b),b.length)e.workBranch=e.projects[E[0]].versions[b].data,c(e.workPCD[e.workPCD.workVersion].path.substring(1),e),"None"!==e.workBranch?s((function(){return e.mainPlace="editor"})):o();else o()}else o()}else e.workPCD=null,e.workBranch.branch={},e.mainPlace="choose";else o()}return e.workBranch.v=Math.random(),Object(d.a)({},e)}();default:return e}function c(e,a){for(;e.length;){var t,r,n,o,s;a.workBranch=null!==(t=null===(r=a.workBranch)||void 0===r||null===(n=r.branch)||void 0===n?void 0:n["q"+(null!==(o=null===(s=e)||void 0===s?void 0:s[0])&&void 0!==o?o:"none")])&&void 0!==t?t:"None",e=e.substring(1)}}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,a=arguments.length>1?arguments[1]:void 0,t=a.type;a.payload;switch(t){case"SET_USER":default:return Object(d.a)({},e)}}}),A=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.d,T=Object(i.e)(y,A(Object(i.a)(l.a,(function(e){return function(a){return function(t){console.log("STORE:",e),console.log("ACTION:",t),console.log("NEXT:",a),t.random=Math.random(),a(t)}}})))),R=t(7),B=t(67),V=t.n(B);V.a.defaults.baseURL="http://localhost:4040",V.a.defaults.headers.common.token=localStorage.token,window.axios=V.a,window.sendErrors=function(e){V.a.post("/error",{message:e,data:window.reduxHistory,token:localStorage.token}).then((function(){return console.log("%c%s","color: mediumseagreen; font-size: 20px;","\u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u0447\u0442\u043e \u043f\u043e\u043c\u043e\u0433\u0430\u0435\u0442\u0435 \u0443\u043b\u0443\u0447\u0448\u0438\u0442\u044c \u0441\u043e\u0444\u0442. \u0415\u0441\u043b\u0438 \u043f\u043e\u0441\u043b\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u043e\u0448\u0438\u0431\u043a\u0430 \u043d\u0435 \u043f\u0440\u043e\u0439\u0434\u0435\u0442, \u0442\u043e \u043f\u0438\u0448\u0438\u0442\u0435 \u043c\u043d\u0435 \u043b\u0438\u0447\u043a\u0443")}))};var L=V.a,H=t(156),U=t.n(H),W=function(e){return{type:"ADD_PROJECT",payload:e}},q=function(e){return{type:"OPEN_PLACE",payload:e}},F=function(e){return{type:"ADD_FRIEND",payload:e}},M=function(e){return{type:"CHANGE_BRANCH",payload:e}},x=function(e){return{type:"CHANGE_MASTER",payload:e}},G=function(e){return{type:"CHOOSE_PERSON",payload:e}},K=function(e){return{type:"ACCESS_CONTROL",payload:e}},J=function(e){return{type:"UPDATE_DATA",payload:e}},z=t(157),Q=function(e){return L.post("/auth/login",e)},Y=function(){return L.post("/auth/check")},X=function(e){return{type:"INIT",payload:e}},$=U()("http://localhost:4040",{transports:["polling"]});$.on("connect",(function(){console.log("%c%s","color: green; font-size: 23px","REAL_SOCKET_CONNECT")})).on("FORB",(function(){console.log("%c%s","color: pink; font-size: 18px;","FORBIDDEN"),delete localStorage.token})).on("FORBIDDEN",(function(){console.log("%c%s","color: darkred; font-size: 22px;","GET_FORBIDDEN")})).on("VERSION_UPDATE",(function(e){T.dispatch(J({data:e,address:"versions"})),console.log("GG_WP"),console.log("%c%s","color: indigo; font-size: 22px;","VERSION_UPDATE_PASS: ",e)})).on("NEW_VERSION",(function(e){console.log("%c%s","color: goldenrod; font-size: 22px;","NEW_VERSION_YOU_PROJECT",e)})).on("NEW_ACCESS",(function(e){T.dispatch(K({event:"NEW",pass:e}))})).on("NEW_SUPER_ACCESS",(function(e){b({type:"success",message:"New super access",description:"From ".concat(e.nickName)}),T.dispatch(K({event:"NEW_SUPER",pass:e}))})).on("KICK",(function(e){T.dispatch(K({event:"KICK",pass:e}))})).on("SUPER_KICK",(function(e){T.dispatch(K({event:"SUPER_KICK",pass:e}))})).on("FRIEND_REQUEST",(function(e){var a=e.user;console.log("%c%s","color: aqua; font-size: 22px","FRIEND_REQUEST:",a),b({type:"info",message:"New request to friend"}),T.dispatch({type:"UPDATE_APPLICANT_LIST",payload:a})})).on("ACCEPT_REQUEST",(function(e){var a=e.user;console.log("%c%s","color: deeporange; font-size: 22px","ACCEPT_REQUEST:",a),T.dispatch(F(a))})).on("NEW_FRIEND",(function(e){var a=e.user;console.log("%c%s","color: navy; font-size: 22px","NEW_FRIEND:",a),b({type:"success",message:"Accept request",description:"New friend: ".concat(a.userData.nickName)}),T.dispatch(F(a))})).on("NEW_AVAILABLES",(function(e){var a=e.person,t=e.workPCD,r=e.payload,n=e.sender;T.getState().main.personObj.userData.superId!==n&&T.dispatch(J({data:{person:a,workPCD:t,pass:r},address:"available"}))})).on("NEW_ILLUSTRATIONS",(function(e){var a=e.person,t=e.workPCD,r=e.newIllust,n=e.action;e.sender,T.getState().main.personObj.userData.superId;T.dispatch(J({data:{person:a,newIllust:r,action:n,workPCD:t},address:"illustrations"}))})).on("REQUEST_RIGHT",(function(e){var a=e.sender,t=T.getState().main,r=t.personObj.userData.superId,n=t.friends;r!==a&&function(){var e;n.forEach((function(t){var r=t.userData,n=r.superId,o=r.nickName;n!==a||(e=o)})),b({type:"info",message:"Right request",description:"By ".concat(e)})}()})).on("NEW_FRIEND_PROJECT",(function(e){var a=e.project,t=e.sender;T.getState().main.personObj.userData.superId!==t&&T.dispatch({type:"NEW_FRIEND_PROJECT",payload:{personId:t,project:a}})})).on("NEW_FRIEND_VERSION",(function(e){var a=e.person,t=e.projectId,r=e.workVersion,n=e.sender;T.getState().main.personObj.userData.superId!==n&&T.dispatch(J({data:{person:a,projectId:t,workVersion:r},address:"new_version"}))})).on("DELETE",(function(e){var a=e.person,t=e.workPCD,r=e.target;e.sender;T.dispatch(J({data:{person:a,workPCD:t,target:r},address:"delete"}))}));var Z=null;T.subscribe((function(){var e=T.getState();if(e.main.workBranch&&Z!==e.main.workBranch.v){console.log("%c%s","color: royalblue; font-size: 22px;","DEBUG_STATE: ",e);var a=e.main,t=a.projectsCoordsData,r=a.workBranch.v,n=a.workPerson,o=a.workPCD,s=a.projects,c=a.personObj,i=a.availablePayload,l=localStorage.token,u=e.main.projects?e.main.projects[0]:null,d=c.userData.myLastProject;switch((r+"").substring(0,1)){case"c":$.emit("UPDATE_PCD",{token:l,pcd:t,person:n,lastProject:o?o.projectId:null,myLastProject:d,friends:c.userData.friends});break;case"p":$.emit("UPDATE_PROJECTS",{token:l,pcd:t,workVersion:function(){var a,t,r=e.main,n=r.projects,o=r.workPCD,s=o.projectId,c=o.workVersion;for(var i in n)n[i].superId===s&&(a=i);for(var l in n[a].versions)n[a].versions[l].superId===c&&(t=l);return n[a].versions[t].data}(),projectId:o.projectId,versionId:o.workVersion,person:n});break;case"n":$.emit("NEW_PROJECT",{token:l,project:u,pcd:t,myLastProject:d});break;case"v":!function(){var e=o.workVersion,a=o.projectId;$.emit("NEW_VERSION",{token:l,pcd:t,person:n,projectId:a,versionId:e,workVersion:function(){var t,r;for(var n in s)s[n].superId===a&&(t=n);for(var o in s[t].versions)s[t].versions[o].superId===e&&(r=o);return s[t].versions[r]}()})}();break;case"s":!function(){var a,t=e.main,r=t.kicked,n=t.superKicked,c=t.newObservers,i=t.newEditord;for(var u in s)s[u].superId===o.projectId&&(a=u);var d=s[a],p=d.name,m=d.description,h=d.access,v=d.superAccess;$.emit("SETUP_PROJECT",{token:l,projectData:{name:p,description:m,access:h,superAccess:v},projectId:o.projectId,kicked:r,superKicked:n,newObservers:c,newEditord:i})}();break;case"a":$.emit("UPDATE_AVAILABLE",{token:localStorage.token,workPCD:o,person:n,payload:i});break;case"f":break;default:console.log("%c%s","color: red; font-size: 33px;","UNEXPECTED V:",r)}Z=r}}));var ee=$,ae=t(1),te=t.n(ae),re=t(343),ne=(t(258),function(e){var a=e.width,t=void 0===a?100:a,r=e.place,o=void 0===r?"main":r,s=e.placeholder,c=e.changeHandler,i=e.value,l=e.readOnly;return n.a.createElement(re.a,{value:i,readOnly:l,style:{width:t+"%"},onChange:c,placeholder:s,className:te()("input","input__"+o)})}),oe=t(340),se=t(351),ce=t(349),ie=(t(270),function(e){var a=e.actived,t=e.label,r=e.readOnly,o=e.height,s=e.onPlus,c=e.onDelete,i=e.onChoose,l=e.showDelete,u=e.onAction;return n.a.createElement("div",{className:te()("pod",a?"pod-actived":"pod-just"),onClick:function(){return i(o)}},n.a.createElement("div",{className:"pod__top"},n.a.createElement("div",{className:"pod__top_height"},o),!r&&n.a.createElement("div",{className:"pod__top_btns"},n.a.createElement("div",{className:te()("pod__top_btns_delete",l?"pod__top_btns_delete-show":"pod__top_btns_delete-hide"),onClick:function(e){e.stopPropagation(),function(e){e.stopPropagation(),l&&c(o)}(e),u()}},n.a.createElement(se.a,null)),n.a.createElement("div",{className:"pod__top_btns_plus",onClick:function(e){e.stopPropagation(),s(o),u()}},n.a.createElement(ce.a,null)))),n.a.createElement("div",{className:te()("pod__bottom",a?"pod__bottom-actived":"pod__bottom-just")},n.a.createElement(oe.a,{value:t.slice(0,45),readOnly:!0,rows:2})))}),le=t(32),ue=(t(279),function(e){var a=e.children,t=e.place,r=void 0===t?"main":t,o=e.clickHandler,s=e.isCircle,c=e.disabled,i=void 0!==c&&c;return n.a.createElement(le.a,{disabled:i,shape:s?"circle":null,onClick:o,type:"primary",className:te()("button","button__"+r)},a)}),de=t(342),pe=(t(280),t(290),function(e){var a=e.row,t=e.placeholder,r=void 0===t?"":t,o=e.changeHandler,s=e.value,c=e.readOnly,i=void 0!==c&&c,l=e.disabled;return n.a.createElement(oe.a,{disabled:l,readOnly:i,value:s,onChange:function(e){o(e),console.log("WTF")},rows:a,placeholder:r,className:"realMentions"})}),me=t(346),he=(t(291),t(337)),ve=(t(294),he.a.TabPane),fe=function(e){var a=e.value,t=e.setAnswers,r=e.setActiveKey,o=e.readOnly,s={addProps:function(e){return e.map((function(a,t){return a.closable=2!==e.length,a.key=t+"",a}))},remove:function(e){var r,n,o,s=a.panes;a.activeKey;for(var c in s)e===s[c].key&&(o=c);r=s[o-("0"===e?0:1)].key;var i=Object(u.a)(s).slice(0,+o),l=Object(u.a)(s).slice(+o+1);n=i.concat(l),n=this.addProps(n),t({activeKey:r,panes:n})},add:function(){var e=a.panes,r=Object(u.a)(e).concat({content:"",ref:"",wayId:Object(h.a)(),wayColor:"pink"});r=this.addProps(r),t({panes:r,activeKey:r.length-1+""})}};function c(e){var r=a.panes;r[a.activeKey].content=e,t(Object(d.a)(Object(d.a)({},a),{},{panes:r}))}function i(e){e.persist();var r=e.target.value,n=a.panes;n[a.activeKey].ref=r,t(Object(d.a)(Object(d.a)({},a),{},{panes:n}))}var l=a.panes,p=a.activeKey;return n.a.createElement(he.a,{type:o?"card":"editable-card",onChange:function(e){r({activeKey:e})},activeKey:p,onEdit:function(e,a){s[a](e)},className:""},l.map((function(e,a){return n.a.createElement(ve,{tab:e.key,key:e.key,closable:p===a+""&&e.closable},n.a.createElement("div",{style:{margin:"1px"}},n.a.createElement(pe,{readOnly:o,row:3,placeholder:"Answer..",value:e.content,changeHandler:c}),n.a.createElement("div",{className:"refToPod"},n.a.createElement(ne,{readOnly:o,value:e.ref,placeholder:"Ref",changeHandler:i}))))})))},Ee=t(341),be=(t(297),Ee.a.Option),ke=Object(c.b)((function(e){var a=e.main,t=a.projects,r=a.friends,n=a.workPCD,o=a.personObj.userData;return{projects:t,friends:r,workPCD:n,nickName:o.nickName,superId:o.superId}}),{})((function(e){var a,t=e.changeHandler,r=e.isCreate,o=e.isSuper,s=e.projects,c=e.friends,i=e.workPCD,l=e.superId,u=e.nickName,d=e.disabled;console.log("SELECT_IS_READY");var p=[{value:"all",disabled:!1}].concat([{value:u,disabled:!0}]).concat(c.map((function(e){var a=e.userData,t=a.superId;return{value:a.nickName,superId:t,disabled:!1}})));if(r)a=[u];else{var m;for(var h in s)s[h].superId===i.projectId&&(m=h);a=v(o?s[m].superAccess:s[m].access)}function v(e){var a=[];return e.includes("all")&&a.push("all"),e.forEach((function(e){[{userData:{superId:l,nickName:u}}].concat(c).forEach((function(t){var r=t.userData,n=r.superId,o=r.nickName;e===n&&a.push(o)}))})),a}return console.log("%c%s","color: red; font-size:25px;","DEF_DATA:",a),console.log("%c%s","color: red; font-size:25px;","OPTIONS:",p),n.a.createElement(Ee.a,{disabled:d,mode:"multiple",style:{width:"100%"},placeholder:"Please select",defaultValue:a,onChange:t,optionLabelProp:"label"},p.map((function(e){var a=e.value,t=e.disabled,r=e.superId;return n.a.createElement(be,{key:r,value:a,label:a,disabled:t},n.a.createElement("div",null,a))})))})),_e=(t(302),function(e){var a=e.nickName,t=e.src,r=e.projectCount,o=e.onAdd,s=e.superId;return n.a.createElement("div",{className:"addTC"},t?n.a.createElement("div",{className:"addTC__avatar"},n.a.createElement("img",{src:t,alt:""})):n.a.createElement("div",{className:"addTC__avatar_plug"},a.substring(0,2)),n.a.createElement("div",{className:"addTC__data"},n.a.createElement("div",{className:"addTC__data_nickName"},a),n.a.createElement("div",{className:"addTC__data_projectCount"},"Projects: ".concat(r))),n.a.createElement("div",null,n.a.createElement(ue,{clickHandler:function(){return o(s)}},"Accept")))}),je=t(350),we=t(339),ge=t(348),De=t(347),Pe=(t(303),Ee.a.Option),Oe=(je.a.CheckableTag,we.a.Dragger,function(e){var a=e.value,t=e.row,o=e.mentionsHandler,s=e.fileHandler,c=e.artSrc,i=e.illustrations,l=e.unsetIllust,u=e.setIllust,d=e.removeIllust,p=e.readOnly,m=Object(r.useState)("description"),h=Object(R.a)(m,2),v=h[0],f=h[1],E=Object(r.useState)(!1),b=Object(R.a)(E,2),k=(b[0],b[1],{firstVal:"Description",firstHandler:function(){return f("description")},secondVal:"Picture",secondHandler:function(){return f("picture")},checkData:"description"===v});return n.a.createElement("div",{className:"artPart"},n.a.createElement("div",{className:"artPart__main"},n.a.createElement("div",{className:te()("artPart__main_description","artPart__main_description"+("picture"===v?"-hide":"-show"))},n.a.createElement(pe,{readOnly:p,value:a,row:t,placeholder:"Arts description",changeHandler:o})),n.a.createElement("div",{className:te()("artPart__main_picture","artPart__main_picture"+("picture"===v?"-show":"-hide"))},"string"===typeof c?n.a.createElement("div",{className:"pictureWrapper"},n.a.createElement("div",{className:"pictureWrapper__shadow"},n.a.createElement("div",{className:"buttonWrapper"},n.a.createElement("span",{className:"pictureWrapper__shadow_unset",onClick:function(e){return!p&&l(e)}},"x"),n.a.createElement("div",{className:"pictureWrapper__shadow_remove"},n.a.createElement(ge.a,{placement:"rightBottom",title:"Remove this picture",onConfirm:function(){return!p&&d(c)},okText:"Yes",cancelText:"No"},n.a.createElement(se.a,{style:{color:"white"}}))))),n.a.createElement(Ce,{artSrc:c})):n.a.createElement("div",{className:"artPart__main_picture_inputs"},n.a.createElement("input",{disabled:p,style:{display:"none"},name:"file",type:"file",id:"file",onChange:s}),n.a.createElement("label",{htmlFor:"file"},n.a.createElement(De.a,{style:{fontSize:"3vh",color:"grey",marginBottom:"1vh",cursor:"pointer"}})),n.a.createElement(Ee.a,{disabled:p,style:{width:"100%"},showSearch:!0,placeholder:"Select illustration"},i.map((function(e){var a=e.name,t=e.src;return n.a.createElement(Pe,null,n.a.createElement("div",{className:"illustSelect"},n.a.createElement("div",{className:"illustSelect__actions",onClick:function(){return u(t)}},a)))})))))),n.a.createElement(Ae,k))}),Ce=(t(318),function(e){var a=e.artSrc,t=e.clickHandler,o=void 0===t?function(){}:t,s=Object(r.useRef)(null),c=Object(r.useRef)(null),i=Object(r.useState)({width:"auto",height:"auto"}),l=Object(R.a)(i,2),u=l[0],d=l[1],p=Object(r.useState)(null),m=Object(R.a)(p,2),h=m[0],v=m[1],f=Object(r.useState)(!0),E=Object(R.a)(f,2),b=E[0],k=E[1],_=Object(r.useState)(!1),j=Object(R.a)(_,2),w=j[0],g=j[1];return Object(r.useEffect)((function(){if(c.current){if(h!==a)return v(a),d({width:"auto",height:"auto"}),void g(!1);var e=c.current,t=e.naturalHeight,r=e.naturalWidth,n=s.current,o=n.offsetHeight,i=n.offsetWidth;if(0===t&&0===r)return void k(!b);u.width===u.height&&0!==t&&0!==r&&(d(r/t>i/o?{width:"100%",height:"auto"}:{width:"auto",height:"100%"}),g(!0))}})),n.a.createElement("div",{ref:s,className:"boxImage",onClick:o},n.a.createElement("img",{style:{opacity:w?1:0},ref:c,width:u.width,height:u.height,src:h}))}),Ne=(t(319),t(61)),Ie=(t(320),function(e){var a=e.data,t=e.current,r=e.clickHandler;return n.a.createElement("div",{className:"leaf"},a&&n.a.createElement("div",{className:"leaf__tail"}),a?n.a.createElement(Ne.a,{placement:"bottom",title:"".concat(a.branch.branchDirection," dir")},n.a.createElement("div",{onClick:r,className:te()("leaf__main",t&&"leaf__main-current")},a&&function(){for(var e=[],t=a.branch.boost,r=0;r<a.branch.choseCount;){var o=a.branch["q"+r].branch.boost;o>t?e.push(n.a.createElement("div",{style:{bottom:"1.25vh",height:3.5*(o-t)+"vh"},className:"leaf__main_connect"})):o<t&&e.push(n.a.createElement("div",{style:{top:"1.25vh",height:3.5*(t-o)+"vh"},className:"leaf__main_connect"})),r++}return e}(),n.a.createElement("div",{className:"leaf__main_pods"},a.branch.base.length),a.branch.question&&n.a.createElement(Ne.a,{title:"".concat(a.branch.question.main," Q")},n.a.createElement("div",{className:te()("leaf__boll","leaf__boll-right")})),a.hasOwnProperty("ans")&&n.a.createElement(Ne.a,{title:"".concat(a.ans," ANS")},n.a.createElement("div",{className:te()("leaf__boll","leaf__boll-left")})))):null)}),Se=(t(321),function(e){var a=e.branchDirection,t=e.wayDirection,o=e.branchHandler,s=e.wayHandler,c=e.row,i=e.readOnly,l=Object(r.useState)("branch"),u=Object(R.a)(l,2),d=u[0],p=u[1];var m={firstVal:"Branch",firstHandler:function(){return p("branch")},secondVal:"Way",secondHandler:function(){return p("path")},checkData:"branch"===d};return n.a.createElement("div",{className:"directons"},n.a.createElement(pe,{disabled:"path"===d,readOnly:i,value:"path"===d?t:a,row:c,placeholder:"path"===d?"Way (SOON)":"Branch dir..",changeHandler:function(e){console.log("EV:",e),"path"===d?s(e):o(e)}}),n.a.createElement(Ae,m))}),ye=(t(322),je.a.CheckableTag),Ae=function(e){var a=e.firstVal,t=e.firstHandler,r=e.secondVal,o=e.secondHandler,s=e.checkData;return n.a.createElement("div",{className:"checkTags"},n.a.createElement(ye,{checked:s,onClick:function(){return!s&&t()}},a),n.a.createElement(ye,{checked:!s,onClick:function(){return s&&o()}},r))},Te=(t(323),function(){return n.a.createElement("div",{className:"notes"},n.a.createElement("div",{className:"notes__plug"},"Plan & Scenario (SOON)"))}),Re=(t(324),t(173)),Be=Object(c.b)((function(e){var a=e.main,t=a.workBranch,r=a.workPCD,n=a.projects,o=a.personObj,s=a.workPerson,c=[],i=[],l=null,u=!1,d=!1,p=o.userData.nickName;if(null!==r){k(n,r.projectId,"superId",c),k(n[c[0]].versions,r.workVersion,"superId",i),l=n[c[0]].versions[i[0]].master;var m=n[c[0]].superAccess;(d=m.includes(o.userData.superId)||m.includes("all"))&&(null!==l&&l!==p||(u=!0))}return{master:l,illustrations:r?n[c[0]].versions[i[0]].illustrations:[],nickName:p,v:t.v,workBranch:t,person:s,workPCD:r,accessed:u,superAccessed:d,paths:r?n[c[0]].versions[i[0]].paths:[],currentHeight:r?r[r.workVersion].height:null}}),{savePod:function(e){return{type:"SAVE_POD",payload:e}},changeBranch:M,changeMaster:x,setIllustrations:function(e){return{type:"SET_ILLUSTRATIONS",payload:e}}})((function(e){var a=e.savePod,t=e.workBranch,o=e.currentHeight,s=e.changeBranch,c=e.v,i=e.master,l=e.nickName,u=e.person,p=e.workPCD,m=e.changeMaster,v=e.illustrations,f=e.accessed,E=e.superAccessed,b=(e.wayObj,e.ways,e.setIllustrations,Object(r.useState)("0")),k=Object(R.a)(b,2),_=k[0],j=k[1],w=Object(r.useState)({label:"",mainPart:"",comment:"",artsDesription:"",artSrc:null,branchDirection:"",answers:[],activeKey:"0"}),g=Object(R.a)(w,2),D=g[0],P=g[1],O=Object(r.useState)({checkHeight:null,checkPath:null}),C=Object(R.a)(O,2),N=C[0],I=C[1],S=Object(r.useState)(null),y=Object(R.a)(S,2),A=y[0],T=y[1];Object(r.useEffect)((function(){var e=t.pos,a=N.checkHeight,r=N.checkPath,n=N.checkV;if(t.branch.base&&(o!==a||e!==r||c!==n&&"a"!==c[0])){var s="question"!==o?t.branch.base[o]:t.branch.question,i=s.label,l=s.main,u=s.comment,d=s.picture,p=d.src,m=d.alt,h=[{content:"",key:"0",closable:!1,ref:""},{content:"",key:"1",closable:!1,ref:""}],f=t.branch,E=f.choseCount;if(E){for(var b=[],k=0;k<E;k++){var _=f["q"+k],w=_.ans,g=_.branch,D=g.ref;g.wayId;b.push({content:w,key:k+"",closable:E>2,ref:D||""})}h=b}P({label:i,mainPart:l,comment:u,artsDesription:m,artSrc:v.some((function(e){return e.src===p}))?p:null,answers:h,activeKey:"0",branchDirection:t.branch.branchDirection}),I({checkHeight:o,checkPath:e,checkV:c}),j("question"!==o?"0":"1"),T(t.v)}}));var B=null===i;function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;T(!1),B&&m(!0),e&&e()}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;P(Object(d.a)(Object(d.a)({},D),{},{artSrc:e}))}var U=D.label,W=D.mainPart,q=D.comment,F=D.artsDesription,M=D.branchDirection,x=D.wayDirection,G=D.answers,K=D.activeKey,J=D.artSrc;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"editor__left"},n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("div",{className:"editor__left_dropMenu"},n.a.createElement(ue,{disabled:!f,clickHandler:function(){null!==o&&(0===t.branch.choseCount||"question"===o)&&V(j("0"===_?"1":"0"))}},"0"===_?"POD":"QUESTION")),n.a.createElement("div",{className:"editor__left_label"},n.a.createElement(ne,{readOnly:!f,value:U,placeholder:"Label",changeHandler:function(e){e.persist(),P(Object(d.a)(Object(d.a)({},D),{},{label:e.target.value})),V()}}))),n.a.createElement("div",{className:"editor__left_dialog"},n.a.createElement(pe,{readOnly:!f,value:W,row:10,placeholder:"Main part",changeHandler:function(e){P(Object(d.a)(Object(d.a)({},D),{},{mainPart:e})),V()}})),n.a.createElement("div",{className:"editor__left_comment"},n.a.createElement(pe,{readOnly:!f,value:q,row:6,placeholder:"Comment/analysis",changeHandler:function(e){P(Object(d.a)(Object(d.a)({},D),{},{comment:e})),V()}})),n.a.createElement("div",{className:te()("editor__left_tabs","editor__left_tabs"+("1"===_?"-show":"-hide"))},n.a.createElement(fe,{readOnly:!f,setAnswers:function(e){var a=e.activeKey,t=e.panes;P(Object(d.a)(Object(d.a)({},D),{},{answers:t,activeKey:a})),V()},setActiveKey:function(e){var a=e.activeKey;return P(Object(d.a)(Object(d.a)({},D),{},{activeKey:a}))},value:{panes:G,activeKey:K}}),t.branch["q"+K]&&A&&n.a.createElement("div",{className:te()("editor__left_tabs_cross")},n.a.createElement(ue,{clickHandler:function(){s(+K)}},"CROSS")))),n.a.createElement("div",{className:"editor__right"},n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("div",{className:"editor__right_master"},n.a.createElement("div",{className:"editor__right_master_status"},"M: ".concat(i)),n.a.createElement("div",{className:"editor__right_master_btn"},n.a.createElement(ue,{disabled:!E,clickHandler:function(){B&&m(!0),i===l?m(!1):ee.emit("REQUEST_RIGHT",{token:localStorage.token,person:u})}},B?"Stay master":i===l?"Give away right":"Request the right"))),n.a.createElement("div",{className:"editor__right_save"},n.a.createElement("div",{className:"editor__right_save_info"},!A&&n.a.createElement("div",null,"*")),n.a.createElement("div",{className:"editor__right_save_btn"},n.a.createElement(ue,{disabled:!f,clickHandler:function(){a({selectedType:_,data:D}),T(!0)}},"SAVE")))),n.a.createElement("div",{className:"editor__right_dialog"},n.a.createElement(Oe,{readOnly:!f,artSrc:J,value:F,row:10,mentionsHandler:function(e){P(Object(d.a)(Object(d.a)({},D),{},{artsDesription:e})),V()},fileHandler:function(e){e.persist();var a=new FormData,t=e.target.files[0],r=t.name.substring(0).split("."),n="".concat(Object(h.a)(),".").concat(r[r.length-1]);a.append("picture",t,t.name),L.post("/image",a,{headers:{"Content-Type":"multipart/form-data",newname:n}}).then((function(a){var t=a.data,r={name:e.target.files[0].name,src:t};ee.emit("SET_ILLUSTRATIONS",{token:localStorage.token,person:u,workPCD:p,newIllustration:r,action:"ADD"}),P(Object(d.a)(Object(d.a)({},D),{},{artSrc:t}))}))},illustrations:v,unsetIllust:H,setIllust:H,removeIllust:function(e){var a;P(Object(d.a)(Object(d.a)({},D),{},{artSrc:null}));var t,r=Object(Re.a)(v);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.src===e&&(a=n)}}catch(o){r.e(o)}finally{r.f()}ee.emit("SET_ILLUSTRATIONS",{token:localStorage.token,person:u,workPCD:p,newIllustration:a,action:"REMOVE"})}})),n.a.createElement("div",{className:"editor__right_branchDir"},n.a.createElement(Se,{readOnly:!f,row:7,wayHandler:function(){return{}},branchHandler:function(e){P(Object(d.a)(Object(d.a)({},D),{},{branchDirection:e})),V()},wayDirection:x,branchDirection:M})),n.a.createElement("div",{className:te()("editor__right_metaData","editor__right_metaData"+("1"===_?"-show":"-hide"))},n.a.createElement(pe,{disabled:!0,row:6,placeholder:"Meta data (SOON)"}))))})),Ve=Object(c.b)((function(e,a){var t=e.main,r=t.friends,n=t.projects,o=t.workPCD,s=t.workPerson,c=t.personObj.userData,i=c.nickName,l=c.superId,u={friends:r,nickName:i,personSId:l,projects:n,workPCD:o,workPerson:s};if(a.isSetup&&o){var d=[],p=[];k(n,o.projectId,"superId",d),k(n[d[0]].versions,o.workVersion,"superId",p),u.versionComment=n[d[0]].versions[p[0]].comment}return u.isOwner=s===l,u}),{addProject:W,setupProject:function(e){return{type:"SETUP_PROJECT",payload:e}},saveVersion:function(e){return{type:"SAVE_VERSION",payload:e}}})((function(e){var a=e.addProject,t=e.friends,o=(e.nickName,e.personSId),s=e.projects,c=e.workPCD,i=e.isSetup,l=e.setupProject,u=e.workPerson,p=e.versionComment,m=e.isOwner,h=e.saveVersion,v=Object(r.useState)({name:"",description:"",access:[],superAccess:[]}),f=Object(R.a)(v,2),E=f[0],b=f[1],k=Object(r.useState)({comment:""}),_=Object(R.a)(k,2),j=_[0],w=_[1];function g(e){var a=[];return e.includes("all")&&a.push("all"),e.forEach((function(e){t.forEach((function(t){var r=t.userData,n=r.superId,o=r.nickName;e===o&&a.push(n)}))})),a}function D(e){ee.emit("DELETE",{token:localStorage.token,workPCD:c,workPerson:u,target:e})}return Object(r.useEffect)((function(){var e=E.access,a=E.superAccess;if(!e.length||!a.length)if(i){var t;for(var r in s)s[r].superId===c.projectId&&(t=r);var n=s[t],l=n.access,u=n.superAccess,m=n.name,h=n.description;b({name:m,description:h,access:l,superAccess:u})}else b(Object(d.a)(Object(d.a)({},E),{},{access:[o],superAccess:[o]}));i&&!j.comment.length&&w({comment:p})})),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"project__upPart"},n.a.createElement("div",{className:"project__upPart_input"},n.a.createElement(ne,{readOnly:!m,placeholder:"name",changeHandler:function(e){e.persist(),console.log(e.target.value),b(Object(d.a)(Object(d.a)({},E),{},{name:e.target.value+""}))},value:E.name})),n.a.createElement("div",{className:"project__upPart_space"}),n.a.createElement("div",{className:"project__upPart_createBtn"},n.a.createElement(ue,{disabled:!m,clickHandler:function(){i&&l(E),!i&&a(E)}},i?"SAVE PROJECT":"CREATE"))),n.a.createElement("div",{className:"project__bottomPart"},n.a.createElement("div",{className:"project__bottomPart_description"},n.a.createElement(pe,{readOnly:!m,value:E.description,row:2,placeholder:"description",changeHandler:function(e){b(Object(d.a)(Object(d.a)({},E),{},{description:e+""}))}})),n.a.createElement("div",{className:"project__bottomPart_access"},n.a.createElement("p",null,"\u042e\u0437\u0435\u0440\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442:"),n.a.createElement(ke,{disabled:!m,isCreate:!1===i,isSuper:!1,changeHandler:function(e){return b(Object(d.a)(Object(d.a)({},E),{},{access:[E.access[0]].concat(g(e))}))}})),n.a.createElement("div",{className:"project__bottomPart_access"},n.a.createElement("p",null,"\u042e\u0437\u0435\u0440\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043c\u043e\u0433\u0443\u0442 \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0435 \u0432\u0435\u0440\u0441\u0438\u0438 \u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u0438\u0435, \u043f\u0440\u0438 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438:"),n.a.createElement(ke,{disabled:!m,isCreate:!1===i,isSuper:!0,changeHandler:function(e){return b(Object(d.a)(Object(d.a)({},E),{},{superAccess:[E.superAccess[0]].concat(g(e))}))}})),i&&m&&n.a.createElement("div",{className:"project__bottomPart_delete"},n.a.createElement("div",{className:"project__bottomPart_delete_space"}),n.a.createElement("div",{className:"project__bottomPart_delete_btn"},n.a.createElement(ue,{clickHandler:function(){return D("project")}},n.a.createElement(se.a,null)," DELETE PROJECT"))),n.a.createElement("div",{className:"handler"},"VERSION PART"),i&&n.a.createElement("div",{className:"project__versionPart"},n.a.createElement("div",{className:"project__versionPart_top"},n.a.createElement("div",{className:"project__versionPart_top_comment"},n.a.createElement(ne,{placeholder:"name",changeHandler:function(e){e.persist(),console.log(e.target.value),w({comment:e.target.value})},value:p})),n.a.createElement("div",{className:"project__versionPart_top_space"}),n.a.createElement("div",{className:"project__versionPart_top_save"},n.a.createElement(ue,{clickHandler:h},"SAVE VERSION"))),m&&n.a.createElement("div",{className:"project__versionPart_bottom"},n.a.createElement("div",{className:"project__versionPart_bottom_space"}),n.a.createElement("div",{className:"project__versionPart_bottom_deleteBtn"},n.a.createElement(ue,{clickHandler:function(){return D("version")}},n.a.createElement(se.a,null)," DELETE VERSION "))))))})),Le=t(92),He=Object(c.b)((function(e){return Object(Le.a)(e),{}}),{addVersion:function(e){return{type:"ADD_VERSION",payload:e}}})((function(e){var a=e.addVersion,t=Object(r.useState)({comment:"",description:""}),o=Object(R.a)(t,2),s=o[0],c=o[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"version__input"},n.a.createElement(ne,{placeholder:"comment",changeHandler:function(e){e.persist(),console.log(e.target.value),c(Object(d.a)(Object(d.a)({},s),{},{comment:e.target.value+""}))}})),n.a.createElement("div",{className:"version__space"}),n.a.createElement("div",{className:"version__createBtn"},n.a.createElement(ue,{clickHandler:function(){a(s)}},"CREATE")))})),Ue=Ee.a.Option,We=Object(c.b)((function(e){var a=e.main,t=a.friends,r=a.personObj.userData,n=r.superId,o=r.applicantList,s=a.accessV,c=a.workPerson,i=a.friendV;return{friends:t,superId:n,applicantList:o,L:o.length,fL:t.length,workPerson:c,accessV:s,friendV:i}}),{choosePerson:G,updateUsers:function(e){return{type:"UPDATE_USERS",payload:e}},previewPerson:function(e){return{type:"PREVIEW_PERSON",payload:e}},cleanApplicantList:function(e){return{type:"CLEAN_APPLICANT_LIST",payload:e}},updateData:J,changeMaster:x})((function(e){var a=e.friends,t=e.superId,o=e.choosePerson,s=e.applicantList,c=e.cleanApplicantList,i=e.updateData,l=e.changeMaster,u=(e.workPerson,e.previewPerson,e.updateUsers,Object(r.useState)(null)),d=Object(R.a)(u,2),p=d[0],m=d[1],h=Object(r.useState)(null),v=Object(R.a)(h,2),f=v[0],E=v[1],_=Object(r.useState)(null),j=Object(R.a)(_,2),w=j[0],g=j[1],D=Object(r.useState)([]),P=Object(R.a)(D,2),O=P[0],C=P[1],N=p?p.friends.some((function(e){return e.superId===t})):null;Object(r.useEffect)((function(){if(null===w&&(ee.emit("GET_USERS",{token:localStorage.token}),ee.on("NEW_USERS",(function(e){var a=e.users;return g(a)}))),!p||N||f&&f.userData.superId===p.superId){if(p&&(!f||f.userData.superId!==p.superId)){var e;for(var t in a)a[t].userData.superId===p.superId&&(e=t);E(a[e])}}else ee.emit("GET_USERS_DETAIL",{token:localStorage.token,personId:p.superId}),ee.on("NEW_USERS_DETAIL",(function(e){var a=e.user;console.log("MAIN_SOCIAL_EVENT"),E(a)}));return s.length!==O.length&&(ee.emit("GET_COMRADE_DETAIL",{token:localStorage.token}),ee.on("NEW_COMRADE_DETAIL",(function(e){var a=e.comrades;console.log("ALlenght: ".concat(s.length," newComrade.length: ").concat(O.length)),C(a)}))),function(){var e=T.getState().main,a=e.mainPlace,t=e.workPerson,r=e.personObj.userData.superId;p&&r===t&&"social"!==a&&ee.emit("UNSUBSCRIBE_USER",{token:localStorage.token,personId:p.superId})}}));var I=f&&f.projects.filter((function(e){var a=e.access;return a.includes(t)||a.includes("all")}));function S(e){ee.emit("ACCEPT_REQUEST",{token:localStorage.token,personId:e}),c(e),C(O.filter((function(a){return a.superId!==e})))}new FormData,f&&(f.userData.superId,p.superId);return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"social__chusedUser"},p?n.a.createElement("div",{className:"social__chusedUser--WRAPPER"},n.a.createElement("div",{className:"social__chusedUser_showProfile"},m.src?n.a.createElement("div",{className:"social__chusedUser_showProfile_avatar"},n.a.createElement("img",{src:m.src,alt:""})):n.a.createElement("div",{className:"social__chusedUser_showProfile_avatar_plug"},p.nickName.substring(0,2))),N&&n.a.createElement("div",{className:"social__chusedUser_chuseProfile"},n.a.createElement(ue,{clickHandler:function(){I.length&&N?(ee.emit("SUBSCRIBE_USER",{token:localStorage.token,personId:f.userData.superId}),ee.on("NEW_SUBSCRIBE_USER",(function(e){var a=e.friendObj;l(!1),i({data:a,address:"friend"}),o(p.superId)}))):b({type:"warning",message:"Restriction",description:"The user must have at least one project"})}},"Choose profile")),!N&&n.a.createElement("div",{className:"social__chusedUser_addToFriend"},n.a.createElement(ue,{clickHandler:function(){ee.emit("FRIEND_REQUEST",{token:localStorage.token,person:p})}},"Add to comrades")),n.a.createElement("div",{className:"social__chusedUser_projectCount"},f&&"Count of available projects: ".concat(I.length))):n.a.createElement("div",{className:"social__chusedUser_plug"},"Selected person")),w&&n.a.createElement("div",{className:"social__findUser"},n.a.createElement(Ee.a,{showSearch:!0,style:{width:"100%"},placeholder:"Users",onSelect:function(e){var a=[];k(w,e,"nickName",a),m(w[a[0]])}},w.map((function(e){var a=e.nickName;return n.a.createElement(Ue,{value:a},a)})))),n.a.createElement("div",{className:"social__findFriend"},n.a.createElement(Ee.a,{showSearch:!0,style:{width:"100%"},placeholder:"Friends",onSelect:function(e){var t=[];k(a,e,["userData","nickName"],t),ee.emit("SUBSCRIBE_USER",{token:localStorage.token,personId:a[t[0]].userData.superId}),ee.on("NEW_SUBSCRIBE_USER",(function(e){var a=e.friendObj;i({data:a,address:"friend"}),m(a.userData)}))}},a.length&&a.map((function(e){var a=e.userData.nickName;return n.a.createElement(Ue,{value:a},a)})))),n.a.createElement("div",{className:"social__requestToFriend"},O.length?n.a.createElement("div",{className:"social__requestToFriend_list"},O.map((function(e){var a=e.nickName,t=e.src,r=e.projectCount,o=e.superId;return n.a.createElement(_e,{onAdd:S,nickName:a,src:t,projectCount:r,superId:o})}))):n.a.createElement("div",{className:"social__requestToFriend_plug"},"No requests")))})),qe=(t(325),Object(c.b)((function(){return{}}),{logOut:function(){return{type:"LOGOUT"}}})((function(e){var a=e.logOut;return n.a.createElement("div",{className:"profile"},n.a.createElement("div",{className:"profile__firstLine"},n.a.createElement("div",{className:"profile__firstLine_space"}),n.a.createElement("div",{className:"profile__firstLine_btn"},n.a.createElement(ue,{clickHandler:function(){ee.emit("LOGOUT",{token:localStorage.token}),a()}},"LOGOUT"))))}))),Fe=(t(326),Object(c.b)((function(e){return{mainPlace:e.main.mainPlace}}),{openPlace:q})((function(e){var a=e.mainPlace,t=e.openPlace,o=Object(r.useState)([{name:null,payload:n.a.createElement("div",null)}]),s=Object(R.a)(o,2),c=s[0],i=s[1];return Object(r.useEffect)((function(){if(c[0].name!==a){var e;switch(a){case"editor":e=n.a.createElement("div",{className:te()("editor")},n.a.createElement(Be,null));break;case"project":e=n.a.createElement("div",{className:te()("project")},n.a.createElement(Ve,{isSetup:!1}));break;case"version":e=n.a.createElement("div",{className:te()("version")},n.a.createElement(He,null));break;case"setup":e=n.a.createElement("div",{className:te()("project")},n.a.createElement(Ve,{isSetup:!0}));break;case"beginner":e=n.a.createElement("div",{className:te()("beginner")},n.a.createElement(ue,{clickHandler:function(){return t("project")}},"CREATE YOUR FIRST PROJECT"));break;case"social":e=n.a.createElement("div",{className:te()("social")},n.a.createElement(We,null));break;case"choose":e=n.a.createElement("div",{className:"choose"},"Choose project");break;case"error":e=n.a.createElement("div",{className:"error"},"Project, version or pod was deleted, rechoose project.");break;case"profile":e=n.a.createElement("div",{className:"profile"},n.a.createElement(qe,null))}i([{name:a,payload:e}])}})),n.a.createElement("div",{className:"main"},c[0].payload)}))),Me=function(){return n.a.createElement("div",{className:"navbar__branch"},n.a.createElement("div",{className:"navbar__branch_podsInput"},n.a.createElement(ne,{place:"navbar",placeholder:"Pods height",changeHandler:function(e){e.persist(),console.log("%c%s","color: blue; font-size: 12px;","EV:",e)}})),n.a.createElement("div",{className:"navbar__branch_saveBtn"},n.a.createElement(ue,{place:"navbar"},"Add")),n.a.createElement("div",{className:"navbar__branch_showBtn"},n.a.createElement(ue,{place:"navbar"},"|")))},xe=Object(c.b)((function(e){var a=e.main,t=(a.demo_projects,a.projects),r=a.workPCD,n=a.workBranch,o=a.personObj,s=a.workPerson,c=!1,i=function(e){return e.includes(o.userData.superId)||e.includes("all")};if(r){var l=[];k(t,r.projectId,"superId",l),c=i(t[l[0]].superAccess)}return{projects:t.filter((function(e){var a=e.access;return i(a)})),projectId:r?r.projectId:null,workVersion:r?r.workVersion:null,superAccessed:c,isOwner:s===o.userData.superId,v:n.v}}),{addProject:W,openPlace:q,selectProject:function(e){return{type:"SELECT_PROJECT",payload:e}},selectVersion:function(e){return{type:"SELECT_VERSION",payload:e}},changeMaster:x})((function(e){for(var a=e.projects,t=e.superAccessed,o=e.isOwner,s=e.selectProject,c=e.selectVersion,i=e.projectId,l=e.workVersion,u=e.openPlace,d=e.changeMaster,p=Object(r.useState)(!1),m=Object(R.a)(p,2),h=(m[0],m[1],Object(r.useState)(!0)),v=Object(R.a)(h,2),f=(v[0],v[1],void 0),E=0;E<a.length;E++)a[E].superId===i&&(f=E);var b=void 0;if(void 0!==f)for(var k in a[f].versions)a[f].versions[k].superId===l&&(b=k);function _(e){var a=e.data,t=e.addHandler,r=e.current,s=e.selectHandl,c=a.map((function(e,a){var t=e.name,o=e.date,s=e.superId,c=e.comment,i=void 0!==c&&c;return n.a.createElement(de.a.Item,{key:s+"",className:te()(s===r&&"ant-menu-item-selected")},n.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},n.a.createElement("span",null,i||t),n.a.createElement("span",null,o)))}));return n.a.createElement("div",{className:"setuper",style:{width:"100%",display:"flex",flexDirection:"column"}},o&&n.a.createElement("div",null,n.a.createElement(ue,{clickHandler:t},"ADD NEW")),n.a.createElement(de.a,{onSelect:s},c))}return n.a.createElement("div",{className:"navbar__mainActions"},n.a.createElement("div",{className:"navbar__mainActions_projects"},n.a.createElement(me.a,{overlay:_({data:a,addHandler:function(){u("project")},current:i,selectHandl:function(e){s(e.key),d(!1)}}),onVisibleChange:function(e){return console.log("OnVisibleChange",e)}},n.a.createElement("div",null,n.a.createElement(ne,{place:"navbar",placeholder:a.length&&void 0!==f?a[f].name:a.length?"Choose some-thing":"Let's create some-thing"})))),n.a.createElement("div",{className:"navbar__mainActions_saves"},a.length&&void 0!==f?n.a.createElement(me.a,{overlay:_({data:a[f].versions,addHandler:function(){u("version")},current:l,selectHandl:function(e){c(e.key),d(!1)}})},n.a.createElement("div",null,n.a.createElement(ne,{place:"navbar",placeholder:a[f].versions[b].comment}))):n.a.createElement(ne,{place:"navbar",placeholder:"Nonee"})),i&&n.a.createElement(n.a.Fragment,null,t&&n.a.createElement("div",{className:"navbar__mainActions_secure"},n.a.createElement(ue,{place:"navbar",clickHandler:function(){return u("setup")}},"Setup")),n.a.createElement("div",{className:"navbar__mainActions_map"},n.a.createElement(ue,{place:"navbar",clickHandler:function(){return u("map")}},"Map"))))})),Ge=Object(c.b)((function(e){var a=e.main;return{friends:a.friends,personObj:a.personObj,workPerson:a.workPerson}}),{openPlace:q,chooseMe:function(e){return{type:"CHOOSE_ME",payload:e}},updateData:J,choosePerson:G,changeMaster:x})((function(e){var a=e.personObj,t=e.workPerson,r=e.friends,o=e.openPlace,s=e.chooseMe,c=e.updateData,i=e.choosePerson,l=e.changeMaster;var u=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.userData.src?n.a.createElement("div",{className:"avatar"},n.a.createElement("img",{src:"",alt:""})):n.a.createElement("div",{className:te()("avatar_alt",t&&"avatar_alt_me")}," ",a," ")};return n.a.createElement("div",{className:"navbar__social"},n.a.createElement("div",{className:"navbar__social_fastAccess"},r.length?n.a.createElement("div",{className:"friendsList"},r.slice(0,6).map((function(e){return n.a.createElement("div",{onClick:function(){return a=e.userData.superId,ee.emit("SUBSCRIBE_USER",{token:localStorage.token,personId:a}),void ee.on("NEW_SUBSCRIBE_USER",(function(e){var t=e.friendObj;l(!1),c({data:t,address:"friend"}),i(a)}));var a}},u(e,e.userData.nickName.substring(0,2)))}))):"Fast access place..."),n.a.createElement("div",{className:"navbar__social_details"},n.a.createElement(ue,{place:"navbar",clickHandler:function(){return o("social")}},"Details")),n.a.createElement("div",{className:"navbar__social_me",onClick:function(){var e=a.userData.superId;t!==e?(ee.emit("GET_USERS_DETAIL",{token:localStorage.token,personId:e}),ee.on("NEW_USERS_DETAIL",(function(a){var t=a.user;console.log("HOME_USER:",t),t.userData.superId===e&&s(t.projects)}))):o("profile")}},a&&u(a,"I",!0)))})),Ke=(t(327),Object(c.b)((function(e){return console.log("STATE:",e),{state:e}}),(function(e){return console.log("DISPATCH",e),{}}))((function(){return n.a.createElement("div",{className:"navbar"},n.a.createElement(Me,null),n.a.createElement(xe,null),n.a.createElement(Ge,null))}))),Je=(t(328),Object(c.b)((function(e){var a=e.main,t=a.workBranch,r=a.workPCD,n=a.projects,o=a.personObj,s=!1,c=null,i=o.userData.nickName;if(r){var l=[],u=[];k(n,r.projectId,"superId",l),k(n[l[0]].versions,r.workVersion,"superId",u),c=n[l[0]].versions[u[0]].master;var d=n[l[0]].superAccess;(d.includes(o.userData.superId)||d.includes("all"))&&(null!==c&&c!==i||(s=!0))}return{workBranch:t,v:t.v,workPCD:r,master:c,currentHeight:r?r[r.workVersion].height:null,accessed:s}}),{addPod:function(e){return{type:"ADD_POD",payload:e}},deletePod:function(e){return{type:"DELETE_POD",payload:e}},choosePod:function(e){return{type:"CHOOSE_POD",payload:e}},changeBranch:M,changeMaster:x})((function(e){var a=e.workBranch,t=e.master,r=(e.workPCD,e.accessed),o=(e.v,e.addPod),s=e.deletePod,c=e.choosePod,i=e.currentHeight,l=e.changeBranch,u=e.changeMaster,d=a.branch.base?a.branch.base.concat(a.branch.question?[a.branch.question]:[]):[],p=d.map((function(e){var a=e.coord.height,t=e.label,l=e.main;return n.a.createElement(ie,{onAction:h,readOnly:!r,actived:i==a,label:t,main:l,height:a,onPlus:o,onDelete:s,onChoose:c,showDelete:d.length>1})})),m=null===t;function h(){m&&u(!0)}return n.a.createElement("div",{className:"branchWrapper"},n.a.createElement("div",{className:"branch"},p.length>0?n.a.createElement("div",{className:"branch__wrapper"},p):n.a.createElement("div",{className:"branch__plug"},"Projects pods...")),a.pos&&a.pos.length>1&&n.a.createElement("div",{className:"branch__goBackPlace"},n.a.createElement("div",{className:"branch__goBackPlace_button"},n.a.createElement(ue,{clickHandler:function(){return l("back")},place:"navbar"},"Cross back"))))}))),ze=(t(329),Object(c.b)((function(e){return Object(Le.a)(e),{}}),{fetchUserData:function(){return function(e){new Promise((function(e,a){try{e(JSON.parse(z))}catch(t){a(!1),console.log("Error parse data json")}})).then((function(a){return e({type:"SET_PROJECTS_DATA",payload:a})}))}},userLogin:function(e){return function(a){Q(e).then((function(e){console.log(e);var t=e.data,r=t.status,n=t.token,o=t.data,s=t.msg;"success"===e.data.status?(b({type:r,message:C(r),description:s}),localStorage.token=n,ee.emit("JOIN",{token:localStorage.token}),a(X(o))):b({type:r,message:C(r),description:s})})).catch((function(e){console.log("Error login: ",e)}))}},autoLoginWithToken:function(){return function(e){Y().then((function(a){var t=a.data,r=t.status,n=t.msg,o=t.token,s=t.data;"success"===r?(b({type:r,message:C(r),description:n}),localStorage.token=o,ee.emit("JOIN",{token:localStorage.token}),e(X(s))):(b({type:r,message:C(r),description:n}),delete localStorage.token)})).catch((function(e){console.log("%c%s","color: red;font-size:33px;","AUTO_LOGIN_ERR:",e)}))}}})((function(e){e.fetchUserData;var a=e.userLogin,t=e.autoLoginWithToken,o=Object(r.useRef)(null),s=Object(r.useState)(!0),c=Object(R.a)(s,2),i=c[0],l=c[1];return Object(r.useEffect)((function(){localStorage.token&&t()})),n.a.createElement("div",{ref:o,className:te()("login",i?"login-show":"login-hide")},n.a.createElement(ue,{clickHandler:function(){var e=localStorage,t={nickName:e.nickName,password:e.password};console.log(t),a(t),l(!i)}},"LOGIN"))}))),Qe=(t(330),Object(c.b)((function(e){var a=e.main,t=a.workPCD;return{workPCD:t,projects:a.projects,mapStore:a.mapStore,mapGrid:a.mapGrid,mapCurrent:a.mapCurrent,workPos:t[t.workVersion].path}}),{setMapData:function(e){return{type:"SET_MAP_DATA",payload:e}},changeBranch:M})((function(e){var a=e.workPCD,t=e.projects,o=e.mapStore,s=e.mapGrid,c=e.mapCurrent,i=e.setMapData,l=e.workPos,u=e.changeBranch,d=Object(r.useState)([]),p=Object(R.a)(d,2),m=p[0],h=p[1];return Object(r.useEffect)((function(){if(0==o){var e=new O(P),d=[];k(t,a.projectId,"superId",d);var p=[];k(t[d[0]].versions,a.workVersion,"superId",p);var m=t[d[0]].versions[p[0]].data;e.onmessage=function(e){console.log("WD:",e.data);var a=l,t=e.data.grid.slice(),r=e.data.grid.map((function(e,t){return e.map((function(e){var t,r=e.data;return n.a.createElement(Ie,{clickHandler:function(){return u(r.pos)},data:r,current:(null!==(t=null===r||void 0===r?void 0:r.pos)&&void 0!==t?t:null)===a})}))}));console.timeEnd(),i({mapGrid:t,mapStore:r,mapCurrent:a}),h(r.map((function(e){return n.a.createElement("div",{className:"map__line"},e)})))},console.time(),e.postMessage(m)}else if(c!==l){var v={},f={};s.forEach((function(e,a){e.forEach((function(e,t){var r=e.data;(null===r||void 0===r?void 0:r.pos)===l&&(f={h:a,l:t}),(null===r||void 0===r?void 0:r.pos)===c&&(v={h:a,l:t})}))}));var E=v,b=E.h,_=E.l,j=f,w=j.h,g=j.l;o[b][_]=Object(r.cloneElement)(o[b][_],{current:!1}),o[w][g]=Object(r.cloneElement)(o[w][g],{current:!0}),i({mapGrid:s,mapStore:o,mapCurrent:l}),h(o.map((function(e){return n.a.createElement("div",{className:"map__line"},e)})))}})),n.a.createElement("div",{className:"map"},n.a.createElement("div",{className:"map__top"},n.a.createElement("div",{className:"map__top_space"}),n.a.createElement("div",{className:"map__top_mainPart"},n.a.createElement("div",{className:"map__top_mainPart_wrapper"},n.a.createElement("div",{className:"map__top_mainPart_space"}),n.a.createElement("div",{className:"map__top_mainPart_wrapper_row"},n.a.createElement("div",null," ",m),n.a.createElement("div",{className:"map__top_mainPart_space_row"})))),n.a.createElement("div",{className:"map__top_space"})),n.a.createElement("div",{className:"map__bottom"},n.a.createElement("div",{className:"map__bottom_space"})))}))),Ye=(t(331),Object(c.b)((function(e){var a=e.main;return{projects:a.projects,mainPlace:a.mainPlace}}),{})((function(e){var a=e.projects,t=e.mainPlace,o=Object(r.useState)(!1),s=Object(R.a)(o,2);s[0],s[1];return n.a.createElement(n.a.Fragment,null,a?n.a.createElement("section",{className:"base"},n.a.createElement(Ke,null),n.a.createElement("div",{className:"base__mainPart"},n.a.createElement(Je,null),n.a.createElement("div",{className:"base__workPlace"},"map"===t?n.a.createElement(Qe,null):n.a.createElement(n.a.Fragment,null,n.a.createElement(r.Suspense,{fallback:null},n.a.createElement(Fe,null)),n.a.createElement(Te,null))))):n.a.createElement("section",{className:"auth"},n.a.createElement(ze,null)))})));t(332);s.a.render(n.a.createElement(c.a,{store:T},n.a.createElement(Ye,null)),document.querySelector("#root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[176,1,2]]]);
//# sourceMappingURL=main.11a5ffd2.chunk.js.map